<%=link_to 'Create Trail', new_trail_path%>
<div>
<%=@page.upcase%>
<div>
<h5>Created Trails<h5>
<%current_user.created_trails.each do |t|%>
  <%=link_to t.name, t%>
    <%if t.priv%>
      [PRIVATE]<br>
        <%if current_user == t.creator%>
          Password: <%=t.password%><br>
        <%end%>
    <%else%>
      [PUBLIC]<br>
    <%end%>
      <%if current_user == t.creator && !t.published%>
        <%=link_to 'Edit/Publish', edit_trail_path%><br>
        <%=form_for(t, :html => { :method => :delete }) do |f|%>
          <%= f.submit "Delete Trail" %>
          <% end %><br>
      <%end%>
<%end%>
<h5>Saved Trails<h5>
<%current_user.favorites.each do |t|%>
  <%=link_to t.trail.name, t.trail%>
    <%if t.trail.priv%>
      [PRIVATE]<br>
    <%else%>
      [PUBLIC]<br>
    <%end%>
    <%=link_to "Remove from Saved", "/users/#{current_user.id}/remove/#{t.trail.id}" %>
<%end%>

</div>

<div>
<h5>Past Trails<h5>
<%current_user.actives.each do |t|%>
  <%=link_to t.trail.name, t.trail%>
  <%if t.trail.priv%>
    [PRIVATE]
  <%else%>
    [PUBLIC]
  <%end%>
  <%if t.completed%>
    Completed!
    <%if t.winner%>
      YOU WON!!!
    <%end%>
  <%end%>
  <%=form_for(t, :html => { :method => :delete }) do |f|%>
    <%= f.submit "Remove from History" %>
    <% end %><br>
<%end%>
</div>

<%if current_user.username == @page%>
<div>
<h4>Explore </h4>
  <%@trails.each do |t|%>
  <%=link_to t.name, t%>
    <%if t.priv%>
      [PRIVATE]
    <%else%>
      [PUBLIC]
    <%end%>
  by <%=link_to t.creator.username, t.creator%><br>
  <%=t.description%><br><br>
  <%end%>
<%end%>
</div>

<%= link_to_previous_page @trails, 'Previous' %>
<%= paginate @trails, :window => 1, :remote => true %>
<%= link_to_next_page @trails, 'Next' %>
</div>
